{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yueyu\\\\OneDrive\\\\CardiIQ\\\\frontend\\\\src\\\\components\\\\CameraPPG.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport './CameraPPG.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CameraPPG = ({\n  duration = 30,\n  onComplete\n}) => {\n  _s();\n  const [isRecording, setIsRecording] = useState(false);\n  const [status, setStatus] = useState('idle');\n  const [ppgData, setPpgData] = useState([]);\n  const [lastSample, setLastSample] = useState(null);\n  const [snapshotUrl, setSnapshotUrl] = useState(null);\n  const [bypassBrightness, setBypassBrightness] = useState(false);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const graphRef = useRef(null);\n  const rafRef = useRef(null);\n  const streamRef = useRef(null);\n  const frameCountRef = useRef(0);\n  useEffect(() => {\n    return () => {\n      stopAll();\n    };\n  }, []);\n  const setStatusMsg = s => {\n    try {\n      setStatus(s);\n    } catch (e) {}\n  };\n  async function requestPermission() {\n    try {\n      setStatusMsg('requesting camera permission');\n      const s = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'environment',\n          width: {\n            ideal: 640\n          },\n          height: {\n            ideal: 480\n          }\n        },\n        audio: false\n      });\n      streamRef.current = s;\n      if (videoRef.current) videoRef.current.srcObject = s;\n      setStatusMsg('camera permission granted');\n      return s;\n    } catch (err) {\n      console.error('permission error', err);\n      setStatusMsg('camera permission denied: ' + (err && err.name ? err.name : String(err)));\n      throw err;\n    }\n  }\n  async function attemptPlay() {\n    try {\n      if (!videoRef.current) return;\n      await videoRef.current.play();\n      setStatusMsg('video playing');\n    } catch (e) {\n      setStatusMsg('video play blocked - tap allowed');\n    }\n  }\n  async function startRecording() {\n    try {\n      setStatusMsg('starting');\n      if (!streamRef.current) {\n        try {\n          await requestPermission();\n        } catch (err) {\n          return;\n        }\n      }\n\n      // ensure video element has srcObject\n      if (videoRef.current && !videoRef.current.srcObject && streamRef.current) {\n        videoRef.current.srcObject = streamRef.current;\n      }\n      try {\n        await videoRef.current.play();\n      } catch (e) {\n        // user gesture may be required\n        setStatusMsg('tap video to start playback');\n      }\n      setIsRecording(true);\n      frameCountRef.current = 0;\n      setPpgData([]);\n      // small delay to let video metadata settle\n      setTimeout(() => {\n        startLoop();\n      }, 300);\n    } catch (err) {\n      console.error('startRecording error', err);\n      setStatusMsg('start error');\n    }\n  }\n  function stopAll() {\n    setIsRecording(false);\n    if (rafRef.current) {\n      try {\n        cancelAnimationFrame(rafRef.current);\n      } catch (e) {}\n      rafRef.current = null;\n    }\n    if (streamRef.current) {\n      try {\n        streamRef.current.getTracks().forEach(t => t.stop());\n      } catch (e) {}\n      streamRef.current = null;\n    }\n    if (videoRef.current) {\n      try {\n        videoRef.current.srcObject = null;\n      } catch (e) {}\n    }\n    setStatusMsg('stopped');\n  }\n  function stopRecording() {\n    stopAll();\n    // send onComplete with collected ppgData if provided\n    if (onComplete) onComplete(ppgData);\n  }\n  function extractAvgRed(ctx, w, h) {\n    try {\n      const cx = Math.floor(w / 2);\n      const cy = Math.floor(h / 2);\n      const sampleSize = Math.max(8, Math.floor(Math.min(50, Math.min(w, h) * 0.12)));\n      const sx = Math.max(0, Math.min(w - 1, Math.floor(cx - sampleSize / 2)));\n      const sy = Math.max(0, Math.min(h - 1, Math.floor(cy - sampleSize / 2)));\n      const sw = Math.max(1, Math.min(sampleSize, w - sx));\n      const sh = Math.max(1, Math.min(sampleSize, h - sy));\n      const data = ctx.getImageData(sx, sy, sw, sh).data;\n      let red = 0;\n      for (let i = 0; i < data.length; i += 4) red += data[i];\n      const avg = red / Math.max(1, data.length / 4);\n      // simple brightness filter\n      if (!bypassBrightness && (avg < 30 || avg > 245)) return null;\n      return {\n        avg,\n        sx,\n        sy,\n        sw,\n        sh\n      };\n    } catch (e) {\n      return null;\n    }\n  }\n  function drawWaveform(dataArr) {\n    try {\n      const c = graphRef.current;\n      if (!c) return;\n      const ctx = c.getContext('2d');\n      const w = c.width;\n      const h = c.height;\n      ctx.clearRect(0, 0, w, h);\n      if (!dataArr || dataArr.length === 0) return;\n      const minV = Math.min(...dataArr);\n      const maxV = Math.max(...dataArr);\n      const range = Math.max(1e-6, maxV - minV);\n      ctx.strokeStyle = '#00c853';\n      ctx.lineWidth = 2;\n      ctx.beginPath();\n      const step = w / Math.max(1, dataArr.length - 1);\n      for (let i = 0; i < dataArr.length; i++) {\n        const v = (dataArr[i] - minV) / range;\n        const y = h - (10 + v * (h - 20));\n        const x = i * step;\n        if (i === 0) ctx.moveTo(x, y);else ctx.lineTo(x, y);\n      }\n      ctx.stroke();\n    } catch (e) {}\n  }\n  function startLoop() {\n    const canvas = canvasRef.current;\n    const video = videoRef.current;\n    if (!canvas || !video) {\n      setStatusMsg('video/canvas missing');\n      return;\n    }\n    const ctx = canvas.getContext('2d');\n    const step = () => {\n      try {\n        if (!isRecording) return;\n        if (video.readyState >= 2 && video.videoWidth > 0) {\n          canvas.width = video.videoWidth;\n          canvas.height = video.videoHeight;\n          ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n          const sample = extractAvgRed(ctx, canvas.width, canvas.height);\n          if (sample) {\n            const scaled = sample.avg; // keep raw scale for now\n            frameCountRef.current++;\n            setPpgData(prev => {\n              const next = prev.slice(-599);\n              next.push(scaled);\n              drawWaveform(next);\n              return next;\n            });\n            setLastSample(sample.avg);\n            setStatusMsg('recording - frames: ' + frameCountRef.current);\n            // draw sample rect\n            ctx.save();\n            ctx.strokeStyle = 'rgba(255,255,255,0.9)';\n            ctx.lineWidth = 2;\n            ctx.strokeRect(sample.sx, sample.sy, sample.sw, sample.sh);\n            ctx.restore();\n          } else {\n            setStatusMsg('frame received - sample filtered');\n          }\n        } else {\n          setStatusMsg('waiting for video frames...');\n        }\n      } catch (e) {\n        console.warn('loop error', e);\n      }\n      rafRef.current = requestAnimationFrame(step);\n    };\n    rafRef.current = requestAnimationFrame(step);\n  }\n  function takeSnapshot() {\n    try {\n      const c = canvasRef.current;\n      if (!c) return;\n      const url = c.toDataURL('image/png');\n      setSnapshotUrl(url);\n      setStatusMsg('snapshot taken');\n    } catch (e) {\n      setStatusMsg('snapshot failed');\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"camera-ppg\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Status:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 37\n      }, this), \" \", status]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        className: \"ppg-video\",\n        playsInline: true,\n        muted: true,\n        onClick: attemptPlay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        className: \"ppg-canvas\",\n        style: {\n          display: 'block'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => requestPermission(),\n        style: {\n          marginRight: 8\n        },\n        children: \"Request Camera Permission\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 5\n      }, this), !isRecording ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => startRecording(),\n        style: {\n          marginRight: 8\n        },\n        children: \"Start Measurement\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 6\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => stopRecording(),\n        style: {\n          marginRight: 8\n        },\n        children: \"Stop\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: takeSnapshot,\n        style: {\n          marginRight: 8\n        },\n        children: \"Snapshot\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          marginLeft: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: bypassBrightness,\n          onChange: e => setBypassBrightness(e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 38\n        }, this), \" Bypass brightness filter\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Live Metrics\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Last sample: \", lastSample ? lastSample.toFixed(1) : '--']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: graphRef,\n        width: 600,\n        height: 140,\n        style: {\n          width: '100%',\n          height: 140,\n          background: '#fff',\n          borderRadius: 8,\n          border: '1px solid rgba(0,0,0,0.06)'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 4\n    }, this), snapshotUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Snapshot\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: snapshotUrl,\n        alt: \"snapshot\",\n        style: {\n          maxWidth: '100%'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 216,\n    columnNumber: 3\n  }, this);\n};\n_s(CameraPPG, \"FVl9npNtUkOgalunq2T+oFSv+gA=\");\n_c = CameraPPG;\nexport default CameraPPG;\nvar _c;\n$RefreshReg$(_c, \"CameraPPG\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","CameraPPG","duration","onComplete","_s","isRecording","setIsRecording","status","setStatus","ppgData","setPpgData","lastSample","setLastSample","snapshotUrl","setSnapshotUrl","bypassBrightness","setBypassBrightness","videoRef","canvasRef","graphRef","rafRef","streamRef","frameCountRef","stopAll","setStatusMsg","s","e","requestPermission","navigator","mediaDevices","getUserMedia","video","facingMode","width","ideal","height","audio","current","srcObject","err","console","error","name","String","attemptPlay","play","startRecording","setTimeout","startLoop","cancelAnimationFrame","getTracks","forEach","t","stop","stopRecording","extractAvgRed","ctx","w","h","cx","Math","floor","cy","sampleSize","max","min","sx","sy","sw","sh","data","getImageData","red","i","length","avg","drawWaveform","dataArr","c","getContext","clearRect","minV","maxV","range","strokeStyle","lineWidth","beginPath","step","v","y","x","moveTo","lineTo","stroke","canvas","readyState","videoWidth","videoHeight","drawImage","sample","scaled","prev","next","slice","push","save","strokeRect","restore","warn","requestAnimationFrame","takeSnapshot","url","toDataURL","className","children","style","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","ref","playsInline","muted","onClick","display","marginTop","marginRight","marginLeft","type","checked","onChange","target","toFixed","background","borderRadius","border","src","alt","maxWidth","_c","$RefreshReg$"],"sources":["C:/Users/yueyu/OneDrive/CardiIQ/frontend/src/components/CameraPPG.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport './CameraPPG.css';\r\n\r\nconst CameraPPG = ({ duration = 30, onComplete }) => {\r\n\tconst [isRecording, setIsRecording] = useState(false);\r\n\tconst [status, setStatus] = useState('idle');\r\n\tconst [ppgData, setPpgData] = useState([]);\r\n\tconst [lastSample, setLastSample] = useState(null);\r\n\tconst [snapshotUrl, setSnapshotUrl] = useState(null);\r\n\tconst [bypassBrightness, setBypassBrightness] = useState(false);\r\n\r\n\tconst videoRef = useRef(null);\r\n\tconst canvasRef = useRef(null);\r\n\tconst graphRef = useRef(null);\r\n\tconst rafRef = useRef(null);\r\n\tconst streamRef = useRef(null);\r\n\tconst frameCountRef = useRef(0);\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tstopAll();\r\n\t\t};\r\n\t}, []);\r\n\r\n\tconst setStatusMsg = (s) => {\r\n\t\ttry { setStatus(s); } catch (e) {}\r\n\t};\r\n\r\n\tasync function requestPermission() {\r\n\t\ttry {\r\n\t\t\tsetStatusMsg('requesting camera permission');\r\n\t\t\tconst s = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment', width: { ideal: 640 }, height: { ideal: 480 } }, audio: false });\r\n\t\t\tstreamRef.current = s;\r\n\t\t\tif (videoRef.current) videoRef.current.srcObject = s;\r\n\t\t\tsetStatusMsg('camera permission granted');\r\n\t\t\treturn s;\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('permission error', err);\r\n\t\t\tsetStatusMsg('camera permission denied: ' + (err && err.name ? err.name : String(err)));\r\n\t\t\tthrow err;\r\n\t\t}\r\n\t}\r\n\r\n\tasync function attemptPlay() {\r\n\t\ttry {\r\n\t\t\tif (!videoRef.current) return;\r\n\t\t\tawait videoRef.current.play();\r\n\t\t\tsetStatusMsg('video playing');\r\n\t\t} catch (e) {\r\n\t\t\tsetStatusMsg('video play blocked - tap allowed');\r\n\t\t}\r\n\t}\r\n\r\n\tasync function startRecording() {\r\n\t\ttry {\r\n\t\t\tsetStatusMsg('starting');\r\n\t\t\tif (!streamRef.current) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait requestPermission();\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// ensure video element has srcObject\r\n\t\t\tif (videoRef.current && !videoRef.current.srcObject && streamRef.current) {\r\n\t\t\t\tvideoRef.current.srcObject = streamRef.current;\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tawait videoRef.current.play();\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// user gesture may be required\r\n\t\t\t\tsetStatusMsg('tap video to start playback');\r\n\t\t\t}\r\n\r\n\t\t\tsetIsRecording(true);\r\n\t\t\tframeCountRef.current = 0;\r\n\t\t\tsetPpgData([]);\r\n\t\t\t// small delay to let video metadata settle\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tstartLoop();\r\n\t\t\t}, 300);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('startRecording error', err);\r\n\t\t\tsetStatusMsg('start error');\r\n\t\t}\r\n\t}\r\n\r\n\tfunction stopAll() {\r\n\t\tsetIsRecording(false);\r\n\t\tif (rafRef.current) {\r\n\t\t\ttry { cancelAnimationFrame(rafRef.current); } catch (e) {}\r\n\t\t\trafRef.current = null;\r\n\t\t}\r\n\t\tif (streamRef.current) {\r\n\t\t\ttry {\r\n\t\t\t\tstreamRef.current.getTracks().forEach(t => t.stop());\r\n\t\t\t} catch (e) {}\r\n\t\t\tstreamRef.current = null;\r\n\t\t}\r\n\t\tif (videoRef.current) {\r\n\t\t\ttry { videoRef.current.srcObject = null; } catch (e) {}\r\n\t\t}\r\n\t\tsetStatusMsg('stopped');\r\n\t}\r\n\r\n\tfunction stopRecording() {\r\n\t\tstopAll();\r\n\t\t// send onComplete with collected ppgData if provided\r\n\t\tif (onComplete) onComplete(ppgData);\r\n\t}\r\n\r\n\tfunction extractAvgRed(ctx, w, h) {\r\n\t\ttry {\r\n\t\t\tconst cx = Math.floor(w / 2);\r\n\t\t\tconst cy = Math.floor(h / 2);\r\n\t\t\tconst sampleSize = Math.max(8, Math.floor(Math.min(50, Math.min(w, h) * 0.12)));\r\n\t\t\tconst sx = Math.max(0, Math.min(w - 1, Math.floor(cx - sampleSize / 2)));\r\n\t\t\tconst sy = Math.max(0, Math.min(h - 1, Math.floor(cy - sampleSize / 2)));\r\n\t\t\tconst sw = Math.max(1, Math.min(sampleSize, w - sx));\r\n\t\t\tconst sh = Math.max(1, Math.min(sampleSize, h - sy));\r\n\t\t\tconst data = ctx.getImageData(sx, sy, sw, sh).data;\r\n\t\t\tlet red = 0;\r\n\t\t\tfor (let i = 0; i < data.length; i += 4) red += data[i];\r\n\t\t\tconst avg = red / Math.max(1, data.length / 4);\r\n\t\t\t// simple brightness filter\r\n\t\t\tif (!bypassBrightness && (avg < 30 || avg > 245)) return null;\r\n\t\t\treturn { avg, sx, sy, sw, sh };\r\n\t\t} catch (e) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction drawWaveform(dataArr) {\r\n\t\ttry {\r\n\t\t\tconst c = graphRef.current;\r\n\t\t\tif (!c) return;\r\n\t\t\tconst ctx = c.getContext('2d');\r\n\t\t\tconst w = c.width;\r\n\t\t\tconst h = c.height;\r\n\t\t\tctx.clearRect(0, 0, w, h);\r\n\t\t\tif (!dataArr || dataArr.length === 0) return;\r\n\t\t\tconst minV = Math.min(...dataArr);\r\n\t\t\tconst maxV = Math.max(...dataArr);\r\n\t\t\tconst range = Math.max(1e-6, maxV - minV);\r\n\t\t\tctx.strokeStyle = '#00c853';\r\n\t\t\tctx.lineWidth = 2;\r\n\t\t\tctx.beginPath();\r\n\t\t\tconst step = w / Math.max(1, dataArr.length - 1);\r\n\t\t\tfor (let i = 0; i < dataArr.length; i++) {\r\n\t\t\t\tconst v = (dataArr[i] - minV) / range;\r\n\t\t\t\tconst y = h - (10 + v * (h - 20));\r\n\t\t\t\tconst x = i * step;\r\n\t\t\t\tif (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);\r\n\t\t\t}\r\n\t\t\tctx.stroke();\r\n\t\t} catch (e) {}\r\n\t}\r\n\r\n\tfunction startLoop() {\r\n\t\tconst canvas = canvasRef.current;\r\n\t\tconst video = videoRef.current;\r\n\t\tif (!canvas || !video) {\r\n\t\t\tsetStatusMsg('video/canvas missing');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst ctx = canvas.getContext('2d');\r\n\r\n\t\tconst step = () => {\r\n\t\t\ttry {\r\n\t\t\t\tif (!isRecording) return;\r\n\t\t\t\tif (video.readyState >= 2 && video.videoWidth > 0) {\r\n\t\t\t\t\tcanvas.width = video.videoWidth;\r\n\t\t\t\t\tcanvas.height = video.videoHeight;\r\n\t\t\t\t\tctx.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n\t\t\t\t\tconst sample = extractAvgRed(ctx, canvas.width, canvas.height);\r\n\t\t\t\t\tif (sample) {\r\n\t\t\t\t\t\tconst scaled = sample.avg; // keep raw scale for now\r\n\t\t\t\t\t\tframeCountRef.current++;\r\n\t\t\t\t\t\tsetPpgData(prev => {\r\n\t\t\t\t\t\t\tconst next = prev.slice(-599);\r\n\t\t\t\t\t\t\tnext.push(scaled);\r\n\t\t\t\t\t\t\tdrawWaveform(next);\r\n\t\t\t\t\t\t\treturn next;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetLastSample(sample.avg);\r\n\t\t\t\t\t\tsetStatusMsg('recording - frames: ' + frameCountRef.current);\r\n\t\t\t\t\t\t// draw sample rect\r\n\t\t\t\t\t\tctx.save(); ctx.strokeStyle = 'rgba(255,255,255,0.9)'; ctx.lineWidth = 2; ctx.strokeRect(sample.sx, sample.sy, sample.sw, sample.sh); ctx.restore();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetStatusMsg('frame received - sample filtered');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetStatusMsg('waiting for video frames...');\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.warn('loop error', e);\r\n\t\t\t}\r\n\t\t\trafRef.current = requestAnimationFrame(step);\r\n\t\t};\r\n\t\trafRef.current = requestAnimationFrame(step);\r\n\t}\r\n\r\n\tfunction takeSnapshot() {\r\n\t\ttry {\r\n\t\t\tconst c = canvasRef.current;\r\n\t\t\tif (!c) return;\r\n\t\t\tconst url = c.toDataURL('image/png');\r\n\t\t\tsetSnapshotUrl(url);\r\n\t\t\tsetStatusMsg('snapshot taken');\r\n\t\t} catch (e) { setStatusMsg('snapshot failed'); }\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"camera-ppg\">\r\n\t\t\t<div style={{ marginBottom: 8 }}><strong>Status:</strong> {status}</div>\r\n\r\n\t\t\t<div className=\"video-container\">\r\n\t\t\t\t<video ref={videoRef} className=\"ppg-video\" playsInline muted onClick={attemptPlay} />\r\n\t\t\t\t<canvas ref={canvasRef} className=\"ppg-canvas\" style={{ display: 'block' }} />\r\n\t\t\t</div>\r\n\r\n\t\t\t<div style={{ marginTop: 12 }}>\r\n\t\t\t\t<button onClick={() => requestPermission()} style={{ marginRight: 8 }}>Request Camera Permission</button>\r\n\t\t\t\t{!isRecording ? (\r\n\t\t\t\t\t<button onClick={() => startRecording()} style={{ marginRight: 8 }}>Start Measurement</button>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<button onClick={() => stopRecording()} style={{ marginRight: 8 }}>Stop</button>\r\n\t\t\t\t)}\r\n\t\t\t\t<button onClick={takeSnapshot} style={{ marginRight: 8 }}>Snapshot</button>\r\n\t\t\t\t<label style={{ marginLeft: 8 }}><input type=\"checkbox\" checked={bypassBrightness} onChange={(e) => setBypassBrightness(e.target.checked)} /> Bypass brightness filter</label>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div style={{ marginTop: 12 }}>\r\n\t\t\t\t<h4>Live Metrics</h4>\r\n\t\t\t\t<div>Last sample: {lastSample ? lastSample.toFixed(1) : '--'}</div>\r\n\t\t\t\t<canvas ref={graphRef} width={600} height={140} style={{ width: '100%', height: 140, background: '#fff', borderRadius: 8, border: '1px solid rgba(0,0,0,0.06)' }} />\r\n\t\t\t</div>\r\n\r\n\t\t\t{snapshotUrl && (\r\n\t\t\t\t<div style={{ marginTop: 12 }}>\r\n\t\t\t\t\t<h4>Snapshot</h4>\r\n\t\t\t\t\t<img src={snapshotUrl} alt=\"snapshot\" style={{ maxWidth: '100%' }} />\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default CameraPPG;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}